{"items":[{"tags":["julia"],"owner":{"reputation":11,"user_id":13759381,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/a83e4e403df50d618032fca64f6b0636?s=128&d=identicon&r=PG&f=1","display_name":"mw934","link":"https://stackoverflow.com/users/13759381/mw934"},"is_answered":true,"view_count":13,"answer_count":1,"score":1,"last_activity_date":1592358680,"creation_date":1592353674,"question_id":62419581,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62419581/apply-colormap-when-plotting-array-in-julia","title":"Apply colormap when plotting array in Julia","body":"<p>I am trying to apply a colormap when plotting an array of numbers in Julia 1.4.1, but all plot entries appear to only use the first color in the map. For instance:</p>\n\n<pre><code>using Plots\n\nplot([1:10], rand(10,5), c=:viridis)\n</code></pre>\n\n<p>No colour change occurs even when I increase the number of plot entries to 1000: </p>\n\n<pre><code>plot([1:10], rand(10,1000), c=:viridis)\n</code></pre>\n\n<p>I have tried to apply the map using <code>color</code> or <code>cgrad</code> too, but had no success. So this leaves me wondering: how can I apply this colourmap such that it correctly spans the number of plot entries?</p>\n"},{"tags":["dataframe","julia"],"owner":{"reputation":1237,"user_id":1380003,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/695c5fd86a629e8c2f0bcd9f37c0b255?s=128&d=identicon&r=PG","display_name":"Keno Fischer","link":"https://stackoverflow.com/users/1380003/keno-fischer"},"is_answered":true,"view_count":46,"answer_count":3,"score":4,"last_activity_date":1592351159,"creation_date":1592347152,"question_id":62418652,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62418652/plot-weekly-data-from-dataframe-of-daily-data","title":"Plot weekly data from DataFrame of daily data","body":"<p>I have a Julia DataFrame like so:</p>\n\n<pre><code>│ Row  │ date               │ users │ posts │ topics │ likes │ pageviews │\n│      │ Date               │ Int64 │ Int64 │ Int64  │ Int64 │ Int64     │\n├──────┼────────────────────┼───────┼───────┼────────┼───────┼───────────┤\n│ 1    │ Date(\"2020-06-16\") │  1    │  3    │ 4      │ 7     │ 10000     │\n│ 2    │ Date(\"2020-06-15\") │  2    │  2    │ 5      │ 8     │ 20000     │\n│ 3    │ Date(\"2020-06-14\") │  3    │  3    │ 6      │ 9     │ 30000     │\n</code></pre>\n\n<p>I would like a plot of posts vs date, but the daily data is too noisy, so I'd\nlike to take sum the posts for every week and plot that instead? What's the easiest\nway to achieve that. </p>\n"},{"tags":["plot","julia","gadfly"],"owner":{"reputation":173,"user_id":5367811,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/291404ba01dcfc4f511a180af260cdb4?s=128&d=identicon&r=PG","display_name":"Yorgos","link":"https://stackoverflow.com/users/5367811/yorgos"},"is_answered":true,"view_count":13,"accepted_answer_id":62414008,"answer_count":1,"score":1,"last_activity_date":1592327548,"creation_date":1592321049,"question_id":62412002,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62412002/horizontal-line-in-gadfly","title":"Horizontal line in Gadfly","body":"<p>I am using <a href=\"https://github.com/GiovineItalia/Gadfly.jl\" rel=\"nofollow noreferrer\">Gadfly.jl</a> in order to plot my function. I try to add a horizontal line by passing the <code>Geom.hline</code> argument. However, I am getting an error:</p>\n\n<blockquote>\n  <p>Couldn't process recipe args: (typeof(f), Int64, Float64,\n  Gadfly.Geom.HLineGeometry)</p>\n</blockquote>\n\n<p>What am I missing?</p>\n\n<p>Here is my code</p>\n\n<pre><code>using Gadfly\n\nf(x)=x/(1-x)\n\nplot(f,0,0.8, yintercept=1.5,  Geom.hline(style=:dot))\n</code></pre>\n"},{"tags":["json","julia"],"owner":{"reputation":680,"user_id":8037521,"user_type":"registered","accept_rate":67,"profile_image":"https://www.gravatar.com/avatar/95033503f12d3840c30d0dd0ea594df6?s=128&d=identicon&r=PG&f=1","display_name":"Valeria","link":"https://stackoverflow.com/users/8037521/valeria"},"is_answered":true,"view_count":21,"answer_count":1,"score":1,"last_activity_date":1592322496,"creation_date":1592318626,"question_id":62411216,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62411216/julia-read-file-into-string-out-of-local-scope","title":"Julia: read file into string out of local scope","body":"<p>It is the first time I am writing in Julia and I am confused by how the variables scoping works, even though I have read it in the docs.</p>\n\n<p>I am writing this simple script to read the contents of the JSON file and parse it into Dict:</p>\n\n<pre><code>import JSON\nusing ArgParse\n\ns = ArgParseSettings()\n@add_arg_table! s begin\n    \"filename\"\n        help = \"a positional argument\"\n        arg_type = String\n        required = true\nend\n\nfunction main(args)\n    jsontxt = \"\"\n    open(args[\"filename\"], \"r\") do f\n        global jsontxt = read(f, String)  # file information to string\n        println(jsontxt)\n    end\n    model_params = JSON.parse(jsontxt)  # parse and transform data\n    println(model_params)\nend\n\nparsed_args = parse_args(ARGS, s)\nmain(parsed_args)\n</code></pre>\n\n<p>So, I expect <code>jsontxt</code> variable to contain the result of <code>read(f, String)</code> when I pass it to <code>JSON.parse</code>. However, it seems that when I call <code>JSON.parse</code>, the <code>jsontxt</code> is empty as in the <code>main</code> function scope. My expectation from reading analogous (or so I have thought) example on reading files was that I would change <code>jsontxt</code> contents if I define it as <code>global</code> variable, which does not seem to happen.</p>\n\n<p>What have I misunderstood and how to correct it? </p>\n\n<p>Example JSON for running the script:</p>\n\n<pre><code>{\n    \"glossary\": {\n        \"title\": \"example glossary\",\n        \"GlossDiv\": {\n            \"title\": \"S\",\n            \"GlossList\": {\n                \"GlossEntry\": {\n                    \"ID\": \"SGML\",\n                    \"SortAs\": \"SGML\",\n                    \"GlossTerm\": \"Standard Generalized Markup Language\",\n                    \"Acronym\": \"SGML\",\n                    \"Abbrev\": \"ISO 8879:1986\",\n                    \"GlossDef\": {\n                        \"para\": \"A meta-markup language, used to create markup languages such as DocBook.\",\n                        \"GlossSeeAlso\": [\"GML\", \"XML\"]\n                    },\n                    \"GlossSee\": \"markup\"\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["julia"],"owner":{"reputation":331,"user_id":7295926,"user_type":"registered","accept_rate":43,"profile_image":"https://i.stack.imgur.com/sVILK.jpg?s=128&g=1","display_name":"fitzy_blarb","link":"https://stackoverflow.com/users/7295926/fitzy-blarb"},"is_answered":true,"view_count":36,"accepted_answer_id":62408729,"answer_count":2,"score":3,"last_activity_date":1592313555,"creation_date":1592309881,"question_id":62408292,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62408292/how-do-i-load-multiple-csv-into-dataframes-in-julia","title":"How do I load multiple CSV into DataFrames in Julia?","body":"<p>I already know how to load a single CSV into a DataFrame:</p>\n\n<pre><code>using CSV\nusing DataFrames    \ndf = DataFrame(CSV.File(\"C:\\\\Users\\\\username\\\\Table_01.csv\"))\n</code></pre>\n\n<p>How would I do this when I have several CSV files, e.g. <code>Table_01.csv</code>, <code>Table_02.csv</code>, <code>Table_03.csv</code>?\nWould I create a bunch of empty DataFrames and use a for loop to fill them? Or is there an easier way in Julia? Many thanks in advance!</p>\n"},{"tags":["initialization","julia","sparse-matrix","julia-jump"],"owner":{"reputation":11,"user_id":13755777,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/ff770b3be57e3a3e3cc7c50390854116?s=128&d=identicon&r=PG&f=1","display_name":"Marthio","link":"https://stackoverflow.com/users/13755777/marthio"},"is_answered":true,"view_count":19,"answer_count":1,"score":1,"last_activity_date":1592340397,"creation_date":1592309134,"question_id":62408066,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62408066/saving-multiple-sparse-arrays-in-one-big-sparse-array","title":"Saving multiple sparse arrays in one big sparse array","body":"<p>I have been trying to implement some code in Julia JuMP. The idea of my code is that I have a for loop inside my while loop that runs S times. In each of these loops I solve a subproblem and get some variables as well as opt=1 if the subproblem was optimal or opt=0 if it was not optimal. Depending on the value of opt, I have two types of constraints, either optimality cuts (if opt=1) or feasibility cuts (if opt=0). So the intention with my code is that I only add all of the optimality cuts if there are no feasibility cuts for s=1:S (i.e. we get opt=1 in every iteration from 1:S). \nWhat I am looking for is a better way to save the values of ubar, vbar and wbar. Currently I am saving them one at a time with the for-loop, which is quite expensive. \nSo the problem is that my values of ubar,vbar and wbar are sparse axis arrays. I have tried to save them in other ways like making a 3d sparse axis array, which I could not get to work, since I couldn't figure out how to initialize it.</p>\n\n<p>The below code works (with the correct code inserted inside my &lt;>'s of course), but does not perform as well as I wish. So if there is some way to save the values of 2d sparse axis arrays more efficiently, I would love to know it! Thank you in advance!</p>\n\n<pre><code>ubar2=zeros(nV,nV,S)\nvbar2=zeros(nV,nV,S)\nwbar2=zeros(nV,nV,S)\nwhile &lt;some condition&gt;\n    opts=0\n    for s=1:S\n        &lt;solve a subproblem, get new ubar,vbar,wbar and opt=1 if optimal or 0 if not&gt;\n        opts+=opt\n        if opt==1\n            # Add opt cut Constraints\n            for i=1:nV\n                for k=1:nV\n                    if i!=k\n                        ubar2[i,k,s]=ubar[i,k]\n                    end\n                end\n                for j=i:nV\n                    if links[i,j]==1\n                        vbar2[i,j,s]=vbar[i,j]\n                        wbar2[i,j,s]=wbar[i,j]\n                    end\n                end\n            end\n        else\n            # Add feas cut Constraints\n            @constraint(mas, &lt;constraint from ubar,vbar,wbar&gt; &lt;= 0)\n            break\n        end\n        if opts==S\n            for s=1:S\n               @constraint(mas, &lt;constraint from ubar2,vbar2,wbar2&gt; &lt;= &lt;some variable&gt;)\n            end\n        end\n    end\n</code></pre>\n"},{"tags":["julia"],"owner":{"reputation":1,"user_id":12848995,"user_type":"registered","profile_image":"https://i.stack.imgur.com/AVUuZ.jpg?s=128&g=1","display_name":"egesabanci","link":"https://stackoverflow.com/users/12848995/egesabanci"},"is_answered":true,"view_count":30,"closed_date":1592297955,"answer_count":1,"score":0,"last_activity_date":1592283583,"creation_date":1592282773,"question_id":62401099,"link":"https://stackoverflow.com/questions/62401099/what-is-abstract-and-composite-types-and-how-can-i-use-them-efficiently-julia","closed_reason":"Needs details or clarity","title":"What is Abstract and Composite Types and how can I use them efficiently? (Julia Language)","body":"<p>Julia programming language has a very strong structure and usage for datatypes. I have read the original documentation of Julia but I didn't understand the 'defining a datatype' part. How can I use the datatype which is defined by me?\n<a href=\"https://i.stack.imgur.com/zwVC9.png\" rel=\"nofollow noreferrer\">sample datatype definition</a></p>\n"},{"tags":["dataframe","conditional-statements","julia","subset"],"owner":{"reputation":1372,"user_id":522477,"user_type":"registered","accept_rate":100,"profile_image":"https://i.stack.imgur.com/E9g68.jpg?s=128&g=1","display_name":"Savage Henry","link":"https://stackoverflow.com/users/522477/savage-henry"},"is_answered":true,"view_count":46,"accepted_answer_id":62401702,"answer_count":1,"score":2,"last_activity_date":1592289288,"creation_date":1592272200,"question_id":62399740,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62399740/how-to-subset-julia-dataframe-by-condition-where-column-has-missing-values","title":"How to subset Julia DataFrame by condition, where column has missing values","body":"<p>This seems like something that should be almost dead simple, yet I cannot accomplish it. </p>\n\n<p>I have a dataframe <code>df</code> in julia, where one column is of type <code>Array{Union{Missing, Int64},1}</code>. </p>\n\n<p>The values in that column are: <code>[missing, 1, 2]</code>. </p>\n\n<p>I would simply like to subset the dataframe <code>df</code> to just see those rows that correspond to a condition, such as where the column is equal to 2. </p>\n\n<p>What I have tried --> result:</p>\n\n<p><code>df[df[:col].==2]</code>  --> <code>MethodError: no method matching getindex</code></p>\n\n<p><code>df[df[:col].==2, :]</code> --> <code>ArgumentError: invalid row index of type Bool</code></p>\n\n<p><code>df[df[:col].==2, :col]</code> --> <code>BoundsError: attempt to access String</code> (note that doing just <code>df[!, :col]</code> results in: <code>1339-element Array{Union{Missing, Int64},1}: [...eliding output...]</code>, with my favorite warning so far in julia: <code>Warning: getindex(df::DataFrame, col_ind::ColumnIndex) is deprecated, use df[!, col_ind] instead.</code> Having just used that would seem to exempt me from the warning, but whatever.)</p>\n\n<p>This cannot be as hard as it seems. </p>\n\n<p>Just as FYI, I <em>can</em> get what I want through <code>using Query</code> and making a multi-line sql query just to subset data, which seems...burdensome.</p>\n"},{"tags":["save","julia","hdf5"],"owner":{"reputation":5056,"user_id":1117766,"user_type":"registered","accept_rate":40,"profile_image":"https://www.gravatar.com/avatar/8941d31fb100b6224f5a6f28bbce8341?s=128&d=identicon&r=PG","display_name":"varantir","link":"https://stackoverflow.com/users/1117766/varantir"},"is_answered":true,"view_count":34,"answer_count":1,"score":1,"last_activity_date":1592253957,"creation_date":1592232387,"question_id":62390773,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62390773/saving-data-in-parallel-in-julia","title":"Saving data in parallel in julia","body":"<p>I am confronted with a problem when submitting many jobs to a cluster, where each job is calculating some data and saving it (with many variables in terms of a .jld file)  to some drive, for example like this</p>\n\n<pre><code>function f(savedir, pid, params)\n    ...\n    save(savedir*\"$(pid).jld\",result)\nend\n</code></pre>\n\n<p>After the calculation I need to process the data and load each .jld file to access the variables individually. Even though the final reduction is rather small, this takes a lot of time. I though about saving it all to one .jld file, but in that case I run into the problem that the file is potentially accessed at the same time, since the jobs run in parallel. Further I though about collecting the data in a out-of-core fashion using juliaDB, but in the end I do not see why this should be any better. I know that this could be solved with some database server, but this seems to be an overkill for my problem. How do you deal with this kind of problems?</p>\n\n<p>Best,</p>\n\n<p>v.</p>\n"},{"tags":["python","julia","pycall"],"owner":{"reputation":11,"user_id":13746269,"user_type":"registered","profile_image":"https://lh3.googleusercontent.com/-BwGFgtts3r8/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckh3BJgHbeDosB2Sg961XoOpCM54g/photo.jpg?sz=128","display_name":"Bruno Camargo","link":"https://stackoverflow.com/users/13746269/bruno-camargo"},"is_answered":false,"view_count":20,"answer_count":0,"score":1,"last_activity_date":1592171387,"creation_date":1592171387,"question_id":62378630,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62378630/error-finding-a-library-libopenlibm-when-calling-a-julia-function-in-python","title":"Error finding a library libopenlibm when calling a julia function in python","body":"<p>I am using python 3.7, from an anaconda distribution.</p>\n\n<p>I am having problems calling some functions from julia using pyjulia. </p>\n\n<p>below is a snipped of my code:</p>\n\n<pre><code>import julia\nfrom julia import Julia\njulia.Julia(runtime=r\"C:\\Users\\Bruno\\AppData\\Local\\Programs\\Julia\\Julia-1.4.2\\bin\\julia.exe\")\nfrom julia import SpecialFunctions\n\nSpecialFunctions.polygamma(3,2)\n</code></pre>\n\n<p>the package SpecialFunctons introduces generalized polygamma functions that can work with complex arguments (as opposed to the polygamma from Scipy, which only acceps real arguments).</p>\n\n<p>The issue is that, when I run the polygamma function, i run into the following error:</p>\n\n<pre><code>julia exception: could not load library \"libopenlibm\"\nThe specified module could not be found.\n Stacktrace:\n [1] gamma at C:\\Users\\Bruno\\.julia\\packages\\SpecialFunctions\\LC8dm\\src\\gamma.jl:573 [inlined]\n [2] polygamma(::Int64, ::Float64) at C:\\Users\\Bruno\\.julia\\packages\\SpecialFunctions\\LC8dm\\src\\gamma.jl:359\n [3] polygamma(::Int64, ::Int64) at C:\\Users\\Bruno\\.julia\\packages\\SpecialFunctions\\LC8dm\\src\\gamma.jl:566\n [4] invokelatest(::Any, ::Any, ::Vararg{Any,N} where N; kwargs::Base.Iterators.Pairs{Union{},Union{},Tuple{},NamedTuple{(),Tuple{}}}) at .\\essentials.jl:712\n [5] invokelatest(::Any, ::Any, ::Vararg{Any,N} where N) at .\\essentials.jl:711\n [6] _pyjlwrap_call(::Function, ::Ptr{PyCall.PyObject_struct}, ::Ptr{PyCall.PyObject_struct}) at C:\\Users\\Bruno\\.julia\\packages\\PyCall\\zqDXB\\src\\callback.jl:28\n [7] pyjlwrap_call(::Ptr{PyCall.PyObject_struct}, ::Ptr{PyCall.PyObject_struct}, ::Ptr{PyCall.PyObject_struct}) at C:\\Users\\Bruno\\.julia\\packages\\PyCall\\zqDXB\\src\\callback.jl:49\n</code></pre>\n\n<p>Which means that python cannot find the libopenlibm library from julia, which is probably necessary to run the function SpecialFunctions.polygamma. I cannot figure out how to make python see this module. The dll libopenlibm.dll.a is clearly in the folder where julia is installed. I tried reinstalling pyjulia, modifying the PATH, and calling other modules of julia (to see if this would actualize a table perhaps). However, I had no success.</p>\n\n<p>Other functions that do not require this library (for example, SpecialFunctions.gamma(x)) do not have this issue.</p>\n\n<p>So, the question is probably: how can I make so that python loads this particular julia library into memory?</p>\n\n<p>any help would be appreciated.</p>\n"},{"tags":["email","julia"],"owner":{"reputation":169,"user_id":11422610,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8094ee2d2a5f9d43e1226fccb7f978b4?s=128&d=identicon&r=PG&f=1","display_name":"Jerzy Brz&#243;ska","link":"https://stackoverflow.com/users/11422610/jerzy-brz%c3%b3ska"},"is_answered":true,"view_count":18,"answer_count":1,"score":1,"last_activity_date":1592216963,"creation_date":1592162824,"last_edit_date":1592163202,"question_id":62377252,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62377252/error-building-libcurl-after-pkg-addsmtpclient-is-there-a-solution-or-an","title":"Error building `LibCURL` after Pkg.add(&quot;SMTPClient&quot;) - is there a solution or an alternative?","body":"<p>I attempted the installation of SMTPClient by executing in the REPL:</p>\n\n<pre><code>using Pkg\nPkg.add(\"SMTPClient\")\n</code></pre>\n\n<p>The last line was not run successully - I got an issue from Julia:</p>\n\n<pre><code>Error: Error building `LibCURL`: \n│ ERROR: LoadError: Could not download https://github.com/bicycle1885/ZlibBuilder/releases/download/v1.0.4/build_Zlib.v1.2.11.jl to /home/jerzy/.julia/packages/LibCURL/lWJxD/deps/build_Zlib.v1.2.11.jl:\n│ ErrorException(\"\")\n│ Stacktrace:\n│  [1] error(::String) at ./error.jl:33\n│  [2] #download#96(::Bool, ::Function, ::String, ::String) at /home/jerzy/.julia/packages/BinaryProvider/U2dKK/src/PlatformEngines.jl:619\n│  [3] download(::String, ::String) at /home/jerzy/.julia/packages/BinaryProvider/U2dKK/src/PlatformEngines.jl:606\n│  [4] top-level scope at /home/jerzy/.julia/packages/LibCURL/lWJxD/deps/build.jl:19\n│  [5] include at ./boot.jl:317 [inlined]\n│  [6] include_relative(::Module, ::String) at ./loading.jl:1044\n│  [7] include(::Module, ::String) at ./sysimg.jl:29\n│  [8] include(::String) at ./client.jl:392\n│  [9] top-level scope at none:0\n│ in expression starting at /home/jerzy/.julia/packages/LibCURL/lWJxD/deps/build.jl:14\n│ --2020-06-14 20:26:37--  https://github.com/bicycle1885/ZlibBuilder/releases/download/v1.0.4/build_Zlib.v1.2.11.jl\n│ Resolving github.com (github.com)... 140.82.118.4\n│ Connecting to github.com (github.com)|140.82.118.4|:443... connected.\n│ HTTP request sent, awaiting response... 302 Found\n│ Location: https://github-production-release-asset-2e65be.s3.amazonaws.com/126450947/3549c780-3c62-11e9-9144-67fac571e02a?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20200614%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20200614T182643Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=fe638ea82a12f0d962d80996378f917f7d5ccd387197248e5a7ee9239f11f6d3&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;repo_id=126450947&amp;response-content-disposition=attachment%3B%20filename%3Dbuild_Zlib.v1.2.11.jl&amp;response-content-?type=application%2Foctet-stream [following]\n│ --2020-06-14 20:26:43--  https://github-production-release-asset-2e65be.s3.amazonaws.com/126450947/3549c780-3c62-11e9-9144-67fac571e02a?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAIWNJYAX4CSVEH53A%2F20200614%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20200614T182643Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=fe638ea82a12f0d962d80996378f917f7d5ccd387197248e5a7ee9239f11f6d3&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;repo_id=126450947&amp;response-content-disposition=attachment%3B%20filename%3Dbuild_Zlib.v1.2.11.jl&amp;response-content-type=application%2Foctet-stream\n│ Resolving github-production-release-asset-2e65be.s3.amazonaws.com (github-production-release-asset-2e65be.s3.amazonaws.com)... failed: Name or service not known.\n│ wget: unable to resolve host address ‘github-production-release-asset-2e65be.s3.amazonaws.com’\n└ @ Pkg.Operations /build/julia-wJr69F/julia-1.0.3+dfsg/usr/share/julia/stdlib/v1.0/Pkg/src/Operations.jl:1097\n</code></pre>\n\n<p>Consistent with the feedback from the REPL, I then proceeded to run the following:</p>\n\n<pre><code>Pkg.build(\"LibCURL\")\n</code></pre>\n\n<p>and got back from Julia the following:</p>\n\n<pre><code>Error: Error building `LibCURL`: \n│ ERROR: LoadError: UndefVarError: products not defined\n│ Stacktrace:\n│  [1] getproperty(::Module, ::Symbol) at ./sysimg.jl:13\n│  [2] top-level scope at /home/jerzy/.julia/packages/LibCURL/lWJxD/deps/build.jl:26\n│  [3] include at ./boot.jl:317 [inlined]\n│  [4] include_relative(::Module, ::String) at ./loading.jl:1044\n│  [5] include(::Module, ::String) at ./sysimg.jl:29\n│  [6] include(::String) at ./client.jl:392\n│  [7] top-level scope at none:0\n│ in expression starting at /home/jerzy/.julia/packages/LibCURL/lWJxD/deps/build.jl:14\n└ @ Pkg.Operations /build/julia-wJr69F/julia-1.0.3+dfsg/usr/share/julia/stdlib/v1.0/Pkg/src/Operations.jl:1097\n</code></pre>\n\n<p>I then restarted the REPL, to no avail.\nIs there a fix to this issue?\nMy environment: Debian 10 LTS. I intend to send emails from my desktop using third-party SMTP servers. Are there perchance any other packages that would do this job?</p>\n"},{"tags":["algorithm","julia"],"owner":{"reputation":23,"user_id":13740949,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/4c51130150eff4cd0cfd7ae6a677f890?s=128&d=identicon&r=PG&f=1","display_name":"vefejer","link":"https://stackoverflow.com/users/13740949/vefejer"},"is_answered":false,"view_count":44,"answer_count":0,"score":1,"last_activity_date":1592170969,"creation_date":1592156608,"last_edit_date":1592170969,"question_id":62376144,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62376144/julia-how-to-do-an-as-of-merge","title":"Julia: How to do an &quot;as of&quot; merge?","body":"<p>Simple question: I would like to understand if Julia has a function to merge \"as of\"[1] two dataframes, or if not how would could implement it.</p>\n\n<p>[1] merge \"as of\" in the style of pandas: <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.merge_asof.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.merge_asof.html</a></p>\n\n<p>EDIT: Here's one example</p>\n\n<pre><code>left = DataFrame(Dict(:timestamp=&gt;[100,200,300,400]))\nright = DataFrame(Dict(:timestamp=&gt;[94, 150, 200, 201, 299, 300, 301, 401], :v=&gt;1:8))\n</code></pre>\n\n<p>The output should be a <code>DataFrame</code> like </p>\n\n<pre><code>DataFrame(Dict(:timestamp=&gt;[100,200,300,400], :v=&gt;[1,3,6,7]))\n</code></pre>\n\n<p>I ended up with the following implementation which works for my case but I'm sure is not as robust or general as it could be (lets assume timestamp cols are sorted):</p>\n\n<pre><code>function mergeasof(left::DataFrame, right::DataFrame, right_col::String)\n    @assert \"timestamp\" in names(left)\n    @assert \"timestamp\" in names(right)\n    @assert right_col in names(right)\n    i = 1\n    j = 1\n    left = copy(left)\n    left[!, right_col] = Array{eltype(right[right_col])}(undef, size(left,1));\n    for j in 1:size(right, 1)\n        if i &lt; size(left, 1)\n            while right.timestamp[j] &gt; left.timestamp[i]\n                i += 1\n                if i == size(left, 1) break end\n            end\n            left[!, right_col][i] = right[!, right_col][j]\n        end\n    end\n    left\nend\n</code></pre>\n\n<p>For example, straight away you can see an edge can which isn't covered: if <code>left</code> contains timestamps earlier than the earliest timestamps in <code>right</code>, then in the merged table you should have some missing values. But that means that setting the type with <code>left[!, right_col] = Array{eltype(right[right_col])}(undef, size(left,1));</code> is wrong. Also this isn't as efficient as it could be if we had an index on the timestamps.</p>\n"},{"tags":["arrays","for-loop","julia","bounds","arrayaccess"],"owner":{"reputation":107,"user_id":11577812,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-0YY-5QooUxM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3retypUQtuKFN4ybA0iswne1F9mj9Q/mo/photo.jpg?sz=128","display_name":"Adrian Azza","link":"https://stackoverflow.com/users/11577812/adrian-azza"},"is_answered":true,"view_count":51,"accepted_answer_id":62378981,"answer_count":1,"score":3,"last_activity_date":1592173984,"creation_date":1592150514,"last_edit_date":1592155514,"question_id":62374988,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62374988/julia-for-loops-used-for-accessing-1d-arrays","title":"Julia For-loops used for accessing 1D Arrays","body":"<p>I am trying to run a 2 for loops to access 2 elements within an array, (e.g.)</p>\n\n<pre><code>x = 100\nfor i in eachindex(x-1)\n  for j in 2:x\n    doSomething = Array[i] + Array[j]\n  end\nend\n</code></pre>\n\n<p>And often (not always) I get this error or similar:</p>\n\n<pre><code>LoadError: BoundsError: attempt to access 36-element Array{Any,1} at index [64]\n</code></pre>\n\n<p>I understand there are proper ways to run these loops to avoid bounds errors, hence my use of <code>eachindex(x-1) == 1:x</code>, how would I do this for <code>2:x</code>?</p>\n\n<p>I am relatively new to Julia, if this is not the reason for the bounds error, what could it be?\n- Thanks</p>\n\n<p>EDIT: shortened version of what I am trying to run (Also yes, vector-arrays)</p>\n\n<pre><code>all_people = Vector{type_person}() # 1D Vector of type person\nsize = length(all_people)\n\n... fill vector array to create an initial population of people ...\n\n# Now add to the array using existing parent objects\nfor i in 1:size-1\n  for j in 2:size\n    if all_people[i].age &gt;= all_people[j].age # oldest parent object forms child variable\n      child = type_person(all_people[i])\n    else\n      child = type_person(all_people[j])\n    end\n    push!(all_people, child) # add to the group of people\n  end\nend\n</code></pre>\n"},{"tags":["indexing","set","julia"],"owner":{"reputation":23,"user_id":13744175,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-Dr18XpXQ9ZA/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucniilq1HUFA8hIlJTIIGaooo-D9vw/photo.jpg?sz=128","display_name":"Gp Ubit","link":"https://stackoverflow.com/users/13744175/gp-ubit"},"is_answered":true,"view_count":40,"accepted_answer_id":62374087,"answer_count":1,"score":2,"last_activity_date":1592273747,"creation_date":1592137714,"last_edit_date":1592149264,"question_id":62372522,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62372522/set-index-not-defined-for-weakrefstrings-springarraystring-1","title":"Set index! not defined for WeakRefStrings. SpringArray{String,1}","body":"<p>i wanted to create a loop on a column in my IJulia and I came up with this error. Please what can I do to rectify it.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>for v=1:length(col1)\n    col1[v] = Dates.DateTime(col1[v], \"d-u-y\")\nend\n</code></pre>\n\n<p>And I got this error:</p>\n\n<pre><code>setindex! not defined for WeakRefStrings.StringArray{String,1}\n\nStacktrace:\n [1] error(::String, ::Type{T} where T) at .\\error.jl:42\n [2] error_if_canonical_setindex(::IndexLinear, ::WeakRefStrings.StringArray{String,1}, ::Int64) at .\\abstractarray.jl:1081\n [3] setindex!(::WeakRefStrings.StringArray{String,1}, ::DateTime, ::Int64) at .\\abstractarray.jl:1072\n [4] top-level scope at .\\In[130]:2\n</code></pre>\n\n<p>I decided to try changing the code a little bit using:</p>\n\n<pre><code>for i in col1\n       global col1[i] = Dates.DateTime(string.(col1[i]), \"d-u-y\")\nend\n</code></pre>\n\n<p>Then I still got this error:</p>\n\n<pre><code>ArgumentError: invalid index: \"4-Jul-2014\" of type String\n\nStacktrace:\n [1] to_index(::String) at .\\indices.jl:297\n [2] to_index(::WeakRefStrings.StringArray{String,1}, ::String) at .\\indices.jl:274\n [3] to_indices at .\\indices.jl:325 [inlined]\n [4] to_indices at .\\indices.jl:322 [inlined]\n [5] getindex(::WeakRefStrings.StringArray{String,1}, ::String) at .\\abstractarray.jl:980\n [6] top-level scope at .\\In[136]:2\n</code></pre>\n"},{"tags":["julia","solution"],"owner":{"reputation":7,"user_id":13333441,"user_type":"registered","profile_image":"https://graph.facebook.com/3249957731707700/picture?type=large","display_name":"Giovanni Chiodini Dos Santos","link":"https://stackoverflow.com/users/13333441/giovanni-chiodini-dos-santos"},"is_answered":false,"view_count":31,"closed_date":1592088907,"answer_count":0,"score":-3,"last_activity_date":1592087602,"creation_date":1592087602,"question_id":62366315,"link":"https://stackoverflow.com/questions/62366315/problema-infact%c3%advel","closed_reason":"Needs details or clarity","title":"Problema infact&#237;vel","body":"<p>Boa noite pessoal, quando eu rodo o código:</p>\n\n<pre><code>Pkg.add(\"JuMP\")\nPkg.add(\"Cbc\")\n\nusing JuMP, Cbc\nmodelo = Model(with_optimizer(Cbc.Optimizer))\n\nT = [18;19;20;21;22;23;24;25;26] #meses em que ocorrem as demandas\nD = [2000;2000;10000;6000;7000;6000;10000;2000;6000] #demandas relacionadas a cada mês\nP = [120;110;140;160;120;110;140;160;120;110;140;160;120;110;140;160] #produtividade dos 16 plots\nL = [22.13;22.13;22.13;22.13;22.13;22.13;22.13;22.13;22.13;22.13;22.13;22.13;22.13;22.13;22.13;22.13] #tamanho de cada plot L\ntl = [12;12;12;12;12;12;12;12;18;18;18;18;18;18;18;18] #tempo de colheita da cana\nto = [9;9;8;8;7;6;6;6;5;5;4;4;6;5;4;3] #mês em que ocorreu plantio\nJ  = 16 #numero de plots em cada fazenda\n\nm = length(D)\nk = length(L)\nF = length(J)\nG = length(J)\nα = 0.5\n\n@variable(modelo, d[j = 1:k] &gt;= 0) # desvio de d+ i1/i2\n@variable(modelo, dl[j = 1:k] &gt;=0) # desvio d- de i1/i2\n@variable(modelo, θ) #desvio máximo\n@variable(modelo, t[j = 1:k]) #tempo total colheita\n\n@variable(modelo, x[i =1:m, j = 1:k], Bin ) # variavel binária 1 se há colheita no mês i no plot j\n@variable(modelo, y[i =1:m, f = 1:F], Bin ) # variavel binária 1 se há colheita no mês i na fazenda f\n@variable(modelo, N[i =1:m], Bin ) # variavel binária 1 se há colheita no mês i na fazenda f\n\n@objective(modelo, Min, α.*(sum( d[j] + dl[j] for j = 1:k)) .+ (1-α)*θ); # objetivo\n\n@constraint(modelo, [j = 1:k], t[j] - to[j] - tl[j] - d[j] + dl[j] == 0);\n@constraint(modelo, [i = 1:m, j = 1:k], t[j] == sum(T[i]*x[i,j])); \n@constraint(modelo, [j = 1:k, i = 1:m], sum(x[i,j]) == 1); #1\n@constraint(modelo, [j = 1:k, i = 1:m], sum(P[j]*L[j]*x[i,j]) &gt;= D[i]); #2\n@constraint(modelo, [j = 1:k], d[j] + dl[j] &lt;= θ);\n@constraint(modelo, [j = 1:k, f=1:F, i=1:m], x[i,j] &lt;= y[i,f]);\n@constraint(modelo, [f = 1:F, i=1:m], N[i] == sum(y[i,f]));\n@constraint(modelo, [i = 1:m], N[i] &lt;= G); #fazendas observadas são menores ou iguais ao número de fazendas disponíveis no caso 1.\n\nprint(modelo)\n\nstatus = optimize!(modelo)\n\nprintln(\"Função objetivo: \", objective_value(modelo))\n\nprintln(\"d[j]\")\nfor j=1:k\n  println(\"d[$j] = \", value(d[j]))\nend\n\nprintln(\"t[j]\")\nfor j=1:k\n  println(\"t[$j] = \", value(t[j]))\nend\n</code></pre>\n\n<p>Ele retorna o erro de que a solução não é factível, como mostra a imagem:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6d5LW.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>Fazendo substituições percebi que as restrições #1 e #2 estão dando o erro, fiz testes com outros arrays mas não consegui resolver o problema, alguém poderia ajudar?</p>\n"},{"tags":["excel","object","julia"],"owner":{"reputation":41,"user_id":13740170,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e0b7df49add007c0335272c3894e20a6?s=128&d=identicon&r=PG&f=1","display_name":"Manos","link":"https://stackoverflow.com/users/13740170/manos"},"is_answered":true,"view_count":37,"answer_count":1,"score":4,"last_activity_date":1592096742,"creation_date":1592059788,"question_id":62361415,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62361415/julia-excel-object","title":"Julia Excel Object","body":"<p>In <strong>MATLAB</strong> someone can write to excel and format excel sheets by creating an <strong>Excel object</strong> using the actxserver command and then using vba-like commands: <a href=\"https://www.mathworks.com/help/matlab/matlab_external/using-a-matlab-application-as-an-automation-client.html\" rel=\"nofollow noreferrer\">https://www.mathworks.com/help/matlab/matlab_external/using-a-matlab-application-as-an-automation-client.html</a></p>\n\n<p>Does <strong>JULIA</strong> provide a similar functionality?</p>\n"},{"tags":["julia"],"owner":{"reputation":45,"user_id":10090812,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/15a9cd238caf852680da70dd5f60c843?s=128&d=identicon&r=PG&f=1","display_name":"Jlee523","link":"https://stackoverflow.com/users/10090812/jlee523"},"is_answered":true,"view_count":57,"accepted_answer_id":62353018,"answer_count":2,"score":4,"last_activity_date":1592008062,"creation_date":1591996814,"question_id":62352674,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62352674/changing-a-value-in-a-julia-array-and-getting-a-strange-result","title":"Changing a value in a Julia array and getting a strange result?","body":"<p>I have the following code in Julia 1.4.2</p>\n\n<pre><code>temp = zeros(Int64, length(input_string))\ni = 1\n\nwhile i&lt; length(input_string)\n   temp[i] = input_string[i]\n   i += 1\nend\n\n</code></pre>\n\n<p>Using <code>input_string = \"200\"</code> I would expect this to return <code>temp = [2 0 0]</code>, but for some reason I return a 3 element Array{Int64,1} with values <code>[50, 48, 0].</code></p>\n\n<p>Is there a way for me to understand this?</p>\n"},{"tags":["object","struct","julia"],"owner":{"reputation":107,"user_id":11577812,"user_type":"registered","profile_image":"https://lh5.googleusercontent.com/-0YY-5QooUxM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3retypUQtuKFN4ybA0iswne1F9mj9Q/mo/photo.jpg?sz=128","display_name":"Adrian Azza","link":"https://stackoverflow.com/users/11577812/adrian-azza"},"is_answered":true,"view_count":32,"accepted_answer_id":62349547,"answer_count":1,"score":3,"last_activity_date":1591983305,"creation_date":1591981679,"question_id":62349134,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62349134/inner-constructor-in-julia","title":"Inner constructor in Julia","body":"<p>I am moving from using Python to Julia and would like to create an object like this:</p>\n\n<pre><code>class myObject():\n  def __init__(inputA,inputB):\n    self.x = inputA;\n    self.y = inputB;\n    self.z = x*y;\n</code></pre>\n\n<p>I know that in Julia we use <code>struct</code> but am unsure how to implement the functionality as describe above without setting <code>z</code> manually (outside of the inner-constructor). How would I do this?</p>\n"},{"tags":["julia"],"owner":{"reputation":63,"user_id":13581931,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b95eb960620ad907f85e6b33ea24eb38?s=128&d=identicon&r=PG&f=1","display_name":"Stijn_antoine","link":"https://stackoverflow.com/users/13581931/stijn-antoine"},"is_answered":true,"view_count":52,"answer_count":3,"score":2,"last_activity_date":1592265695,"creation_date":1591952730,"last_edit_date":1592265695,"question_id":62341038,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62341038/inexacterror-int64float64","title":"InexactError: Int64(::Float64)","body":"<p>I am still learning the language Julia and i have this error. I am writing an mosquito population model and i am trying to run my main function a 100 times. This main function uses many other functions to calculate the subpopulation levels. </p>\n\n<pre><code>\n# Importing KNMI data \nxf = XLSX.readxlsx(\"C:/Scriptie_mosquitoes/knmi_csv.xlsx\")\nsh = xf[\"knmi_csv\"]\ntemperature = sh[\"B3:B368\"]\nprecip = sh[\"F3:F368\"]\n\nsubpopulation_amount = 100\n\nimat_list1 = zeros(100,length(temperature))\nimat_list = Array{Float64}(imat_list1)\n\nadul_list1 = zeros(100,length(temperature))\nadul_list = Array{Float64}(adul_list1)\n\negg_list1 = zeros(100,length(temperature))\negg_list = Array{Float64}(egg_list1)\n\ndiaegg_list1 = zeros(100,length(temperature))\ndiaegg_list = Array{Float64}(diaegg_list1)\n\nimat_list[1] = 100.0\nadul_list[1] = 1000.0\negg_list[1] = 100.0\ndiaegg_list[1] = 100.0\n\nfor counter = 1:1:subpopulation_amount\n    u = Distributions.Normal()\n    temp_change = rand(u)\n    tempa = temperature .+ temp_change\n    println(tempa)\n\n    e = Distributions.Normal()\n    precip_change = rand(e)\n    println(\"hallo\", precip_change)\n\n\n    println(counter,tempa,precip,precip_change)\n    main(counter,tempa::Array{Float64,2},precip::Array{Any,2},precip_change::Float64,imat_list::Array{Float64,2},adul_list::Array{Float64,2},egg_list::Array{Float64,2},diaegg_list::Array{Float64,2})\nend\n</code></pre>\n\n<p>However i get this error which i tried to fix with all the Float64 stuf. I doesn't work unfortunatly. I hope some of you guys see the problem or can help me with understanding the error message.</p>\n\n<pre><code>ERROR: InexactError: Int64(87.39533010546728)\nStacktrace:\n [1] Int64 at .\\float.jl:710 [inlined]\n [2] convert at .\\number.jl:7 [inlined]\n [3] setindex! at .\\array.jl:825 [inlined]\n [4] main(::Int64, ::Array{Float64,2}, ::Array{Any,2}, ::Float64, ::Array{Float64,2}, ::Array{Float64,2}, ::Array{Float64,2}, ::Array{Float64,2}) at .\\REPL[905]:19\n [5] top-level scope at .\\REPL[938]:10\n\n</code></pre>\n"},{"tags":["struct","julia","equals","mutable"],"owner":{"reputation":2108,"user_id":371843,"user_type":"registered","accept_rate":100,"profile_image":"https://www.gravatar.com/avatar/efa4525aa8ee707913ca277b3af19bd4?s=128&d=identicon&r=PG","display_name":"Alec","link":"https://stackoverflow.com/users/371843/alec"},"is_answered":true,"view_count":49,"accepted_answer_id":62340938,"answer_count":2,"score":2,"last_activity_date":1591997696,"creation_date":1591929894,"question_id":62336686,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62336686/struct-equality-with-arrays","title":"Struct equality with arrays","body":"<p>If I have arrays in a struct as below, I can't compare the equality of the struct because the arrays are mutable? Is there a way to get the equality to pass down to the array so that I get <code>true</code> for <code>a([1,2,3]) == a([1,2,3])</code>? Or is the only way to do this to extend <code>Base.==</code>?</p>\n\n<pre><code>julia&gt; struct a\n       v\n       end\n\njulia&gt; a([1,2,3]) == a([1,2,3])\nfalse\n\njulia&gt; a(1) == a(1)\ntrue\n\njulia&gt; [1,2,3] == [1,2,3] # want the equality to work like this for the struct\ntrue\n\njulia&gt; [1,2,3] === [1,2,3]\nfalse\n</code></pre>\n"},{"tags":["c++","windows","boost","julia"],"owner":{"reputation":21,"user_id":13730963,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/def65e5ed63af539e2e6d247b34262a7?s=128&d=identicon&r=PG&f=1","display_name":"C&#233;sar Bertoni ","link":"https://stackoverflow.com/users/13730963/c%c3%a9sar-bertoni"},"is_answered":true,"view_count":25,"answer_count":1,"score":1,"last_activity_date":1591942922,"creation_date":1591919175,"last_edit_date":1591919498,"question_id":62335337,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62335337/using-boost-library-in-julia-with-cxx-jl-on-windows","title":"Using boost library in Julia with Cxx.jl on Windows","body":"<p>I'm using Cxx with Julia 1.3.1 to use a function of the boost library, it works properly on Linux after the installation of such library, but in Windows i have never make it work. This is the module i wrote:</p>\n\n<pre><code>module Airyzero\n\n#Returns zeros of Airy's function\n\nusing Cxx;\nexport airyzero\ncxx\"\"\" \n    #include&lt;iostream&gt;\n    #include &lt;boost/math/special_functions/airy.hpp&gt;\n    #include &lt;boost/multiprecision/cpp_dec_float.hpp&gt;\n    typedef boost::multiprecision::cpp_dec_float_50 float_type;\n    \"\"\"\n\ncxx\"\"\"\n    double airyzero1(int y) {\n    return boost::math::airy_ai_zero&lt;double&gt;(y);\n    }\n    \"\"\"\n\n    airyzero(ind) = @cxx airyzero1(ind)\n\nend\n</code></pre>\n\n<p>So i can use the function <code>airy_ai_zero</code> from boost as <code>airyzero</code> in my code. I need that works also in Windows because none of the computers of my lab uses Linux (neither my collegues).</p>\n"},{"tags":["julia"],"owner":{"reputation":63,"user_id":13581931,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b95eb960620ad907f85e6b33ea24eb38?s=128&d=identicon&r=PG&f=1","display_name":"Stijn_antoine","link":"https://stackoverflow.com/users/13581931/stijn-antoine"},"is_answered":true,"view_count":46,"accepted_answer_id":62327349,"answer_count":1,"score":0,"last_activity_date":1591890896,"creation_date":1591886498,"question_id":62326973,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62326973/how-to-pass-multiple-dimension-arrays-into-a-function-in-julia","title":"How to pass multiple dimension arrays into a function in Julia?","body":"<p>I am still learning the language Julia, however, i am writing a population model that describes the dynamics of 100 mosquito subpopulations. I have many different functions but i think the error lays in the passing to my main function.</p>\n\n<pre><code>xf = XLSX.readxlsx(\"C:/Scriptie_mosquitoes/knmi_csv.xlsx\")\nsh = xf[\"knmi_csv\"]\ntemperature = sh[\"B3:B368\"]\nprecip = sh[\"F3:F368\"]\n\nsubpopulation_amount = 100\nimat_list = zeros(subpopulation_amount,length(temperature))\nadul_list = zeros(subpopulation_amount,length(temperature))\negg_list = zeros(subpopulation_amount,length(temperature))\ndiaegg_list = zeros(subpopulation_amount,length(temperature))\n\nimat_list[1] = 100.0\nadul_list[1] = 1000.0\negg_list[1] = 100.0\ndiaegg_list[1] = 100.0\n\nfor counter = 1:subpopulation_amount\n    u = Normal()\n    temp_change = rand(u)\n    tempa = temperature .+ temp_change\n\n    e = Normal()\n    precip_change = rand(e)\n\n    main(counter,tempa,precip,precip_change,imat_list[:],adul_list[:],egg_list[:],diaegg_list[:])\nend\n</code></pre>\n\n<p>This is the error shown</p>\n\n<pre><code>julia&gt; for counter = 1:subpopulation_amount\n           u = Normal()\n           temp_change = rand(u)\n           tempa = temperature .+ temp_change\n               e = Normal()\n                   precip_change = rand(e)\n           main(counter,tempa,precip,precip_change,imat_list,adul_list,egg_list,diaegg_list)\n           end\nERROR: UndefVarError: Point2f0 not defined\nStacktrace:\n [1] newImmaturetoAdult(::Float64) at .\\REPL[1137]:9\n [2] main(::Int64, ::Array{Float64,2}, ::Array{Any,2}, ::Float64, ::Array{Float64,2}, ::Array{Float64,2}, ::Array{Float64,2}, ::Array{Float64,2}) at .\\REPL[1158]:10\n [3] top-level scope at .\\REPL[1187]:7\n\n</code></pre>\n\n<p>I would very much appreciate it if you guys would like to help me. Anything can help.\nThanks!</p>\n\n<p>I will add the whole code below as well. </p>\n\n<pre><code>using Statistics\nusing Plots\nusing JuliaDB\nusing XLSX\nusing Distributions\nusing Random\n\n# Possible struct for climaticfactors per day\nstruct Climaticfactors\n    temperature\n    precipiation\n    evaporation\n    photoperiod\nend\n\n# First function written, describes the development rate of larvae to adults. on Temperature\n# function developRate(temp)\n#     # function \n#     develop = (-1/225)*(temp-25)^2+1\n\n#     # Check if development is not negative \n#     if develop &lt; 0 \n#         develop = 0 \n#         return develop\n#     else \n#         return develop\n#     end\n# end\n\n# Linear segments between the data points. The function finds the percentage of larvae growing up on temperature\nfunction newImmaturetoAdult(temp)\n    # Data point from literature \n    x = [5.0, 10.0, 15.0, 20.0, 25.0, 30.0, 35.0, 40.0]\n    y = [0.0, 0.0, 50.0, 77.5, 76.3, 67.5, 2.5, 0.0]\n\n    # Loop that goes through all possible temperatures\n    for i in 1:length(x)-1\n\n        # If in the temperature falls between a segment find that point\n        if temp &gt;= x[i] &amp;&amp; temp &lt;= x[i+1]\n            a = LineSegment(Point2f0(x[i], y[i]), Point2f0(x[i+1], y[i+1]))\n            b = LineSegment(Point2f0(temp,0.0),Point2f0(temp,100.0))\n            j = intersects(a,b)\n            c = j[2]\n\n            # Returning the percentage  \n            return c[2]\n\n        # Temperatures do nothing \n        elseif temp&gt;40.0 || temp&lt;5.0\n            return 0.0 \n        end\n    end\nend\n\n# Same technique as before but with egg to larvae on temperature\nfunction eggtolarvea(temp)\n\n    # Data from literature \n    x = [5.0, 10.0, 15.0, 20.0, 25.0, 30.0, 35.0, 40.0]\n    y = [4.4, 4.0, 8.2, 66.9, 49.2, 51.4, 10, 0.0]\n    for i in 1:(length(x)-1)\n        if temp &gt;= x[i] &amp;&amp; temp &lt;= x[i+1]\n            a = LineSegment(Point2f0(x[i], y[i]), Point2f0(x[i+1], y[i+1]))\n            b = LineSegment(Point2f0(temp,0.0),Point2f0(temp,100.0))\n            j = intersects(a,b)\n            c = j[2]\n            return c[2]\n\n        elseif temp&gt;40.0 || temp&lt;5.0\n            return 0.0 \n        end\n    end\nend\n\n# function humidityindex(temp, precip...)\n#     moist_effect = 0\n#     temp_effect = 0 \n#     for i in 1:size(precip)\n#         moist_effect += ((precip[i]/100) * (1-(i/10)))\n#         temp_effect -= ((temp[i]/25) * (1-(i/10)))\n#     end\n\n#     effect = temp_effect + moist_effect\n#     return effect \n# end  \n\nfunction diapauserate(day)\n    y = 0.045*day - 10.75\nend \n\n# Egg_population dynamics \nfunction eggpop(hatch,effect,diarate,egg_pop, adult_pop)\n    # if eggs don't hatch do nothing\n    if hatch == 0 \n        egg_pop *= 0.8\n    end\n\n    if effect &gt; 0\n        tot = adult_pop * 10\n        dia_pop = tot * diarate\n        egg_pop = tot - dia_pop\n    else \n        tot = adult_pop * 4\n        dia_pop = tot * diarate\n        egg_pop = tot - dia_pop\n    end \n\n    return dia_pop, egg_pop\nend\n\n# Larvae population dynamics \nfunction immaturepop(develop_rate, hatch, immature_pop, egg_pop)\n    # Hatch encreases larvae population \n    if hatch == 0 \n        change = immature_pop * develop_rate \n        immature_pop -= change\n    else \n        change = immature_pop * develop_rate \n        immature_pop -= change\n        immature_pop += egg_pop * hatch\n    end\n\n    return immature_pop\nend\n\n# Adult population dynamics\nfunction adultpop(develop_rate,immature_pop,adult_pop)\n    # New adults \n    change = immature_pop * develop_rate\n    adult_pop = adult_pop + change\n    # Survival of 80%\n    adult_pop *= 0.95\n    return adult_pop\nend\n\n# Main \nfunction main(counter,temperature,precip, precip_change,imat_list,adul_list,egg_list,diaegg_list)\n    # Iterating through temperature data (year)\n    for i in 2:1:length(temperature);\n        # Only from 10 march to 30 september mosquito season, otherwise diapause \n        if i &gt;= 69 &amp;&amp; i &lt;= 273;\n            # temperatures in 1 degrees celcius \n            temp = temperature[i] / 10;\n\n            # Development and hatch values in 0.02 values \n            develop = newImmaturetoAdult(temp) / 100;\n            # println(develop)\n            hatch = eggtolarvea(temp) / 100;\n            # println(hatch)\n            # Moist_index\n            evap = collect(1:1:7);\n            precipi = collect(1:1:7);\n\n            for j in 1:7\n                t = temperature[-j+i];\n                evap[j]= t;\n                p = precip[-j+i];\n                precipi[j] = p;\n            end\n\n            moist_effect = 0;\n            temp_effect = 0; \n            for h in 1:length(precipi)\n                moist_effect += ((precipi[h]/100.0) * (1.0-(h/10.0)));\n                temp_effect -= ((evap[h]/200.0) * (1.0-(h/10.0)));\n            end\n            effect = temp_effect + moist_effect + precip_change;  \n\n            if diapauserate(i) &lt;= 0\n                diarate = 0 ;\n            elseif diapauserate(i) &gt;= 1  \n                diarate = 1; \n            else \n                diarate = diapauserate(i);\n            end\n\n            egg = eggpop(hatch,effect,diarate, egg_list[counter,i-1],adul_list[counter,i-1]);\n            egg_list[counter, i] = egg[2]\n            diaegg_list[counter, i] = egg[1]\n            # Changing and adding eggpop\n\n            # Changing and adding immature pop\n            ima = immaturepop(develop, hatch, imat_list[counter,i], egg_list[counter,i-1]);\n            imat_list[counter,i] = ima\n\n            # Changing and adding adult pop\n            adu = adultpop(develop, imat_list[counter,i-1], adul_list[counter,i]);\n            adul_list[counter,i] = adu\n\n        # from 30 september keep egg_level the same but larvae and adult decreasing \n        elseif i &gt; 273 &amp;&amp; i &lt; 365\n            egg_list[counter,i] = egg_list[counter,i-1]/1.1\n            diaegg_list[counter,i] = diaegg_list[counter,i-1]\n            imat_list[counter,i] = imat_list[counter,i-1]/1.1\n            adul_list[counter,i] = adul_list[counter,i-1]/1.1\n\n        else i &gt; 0 &amp;&amp; i &lt; 69\n            egg_list[counter,i] = egg_list[counter,i-1]\n            diaegg_list[counter,i] = diaegg_list[counter,i-1]\n            imat_list[counter,i] = imat_list[counter,i-1]\n            adul_list[counter,i] = adul_list[counter,i-1]\n        end\n\n    end\nend\n\n# using Distributions, Random \n# Random.seed!(123)\n# td = Truncated(Normal(0, 0.05),-5,5)\n# x = rand(td, 10000000)'\n\n# using Distributions\n# using Random\n# Random.seed!(123)\n# d = Normal()\n# x = rand(d, 100)\n\n# Importing KNMI data \nxf = XLSX.readxlsx(\"C:/Scriptie_mosquitoes/knmi_csv.xlsx\")\nsh = xf[\"knmi_csv\"]\ntemperature = sh[\"B3:B368\"]\nprecip = sh[\"F3:F368\"]\n\n# Starting values \n# imat_list = collect(1.0:1:length(temperature));\n# adul_list = collect(1.0:1:length(temperature));\n# egg_list = collect(1.0:1:length(temperature));\n# diaegg_list = collect(1.0:1:length(temperature));\n\nsubpopulation_amount = 100\n\nimat_list = zeros(subpopulation_amount,length(temperature))\nadul_list = zeros(subpopulation_amount,length(temperature))\negg_list = zeros(subpopulation_amount,length(temperature))\ndiaegg_list = zeros(subpopulation_amount,length(temperature))\n\nimat_list[1] = 100.0\nadul_list[1] = 1000.0\negg_list[1] = 100.0\ndiaegg_list[1] = 100.0\n\nfor counter = 1:subpopulation_amount\n    u = Normal()\n    temp_change = rand(u)\n    tempa = temperature .+ temp_change\n\n    e = Normal()\n    precip_change = rand(e)\n\n    main(counter,tempa,precip,precip_change,imat_list,adul_list,egg_list,diaegg_list)\nend\n\n\n\n# # Visualizing \n# populaties = [imat_list, adul_list]\n# x = 1:1:length(temperature)\n# p1 = plot(x,populaties, title= \"Populatie niveaus\", label = [\"ImmaturePopulatie\" \"AdultPopulatie\"], lw = 3)\n# plot(p1)\n# # plot(x,egg_list, title=\"Egg population\")\n\n# egg_popu = [egg_list, diaegg_list]\n# p2 = plot(x,egg_popu, title=\"Egg populations\", label=[\"Eggpop\" \"DiaeggPop\"])\n\n# plot(p1,p2, layout=(2,1), legend=true)\n</code></pre>\n"},{"tags":["neural-network","julia","training-data","vscode-debugger"],"owner":{"reputation":7,"user_id":11509379,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/b5913949e747dad8806a40430c8018d5?s=128&d=identicon&r=PG&f=1","display_name":"iza","link":"https://stackoverflow.com/users/11509379/iza"},"is_answered":true,"view_count":25,"answer_count":1,"score":0,"last_activity_date":1591878039,"creation_date":1591876139,"question_id":62323698,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62323698/julia-lang-error-loaderror-undefvarerror-train-not-defined","title":"Julia lang ERROR: LoadError: UndefVarError: train not defined","body":"<p>it is my first time in Julia. </p>\n\n<pre><code>using Pkg\nPkg.add(\"Flux\")\nPkg.add(\"MLDatasets\")\nPkg.add(\"Lathe\")\n#download MNIST\nusing MLDatasets \nFashionMNIST.download(i_accept_the_terms_of_use=true)\ntrain_x, train_y = FashionMNIST.traindata();  \ntest_x,  test_y  = FashionMNIST.testdata();\n#import Flux\nusing Flux, Statistics \nusing Flux: onehotbatch, onecold, crossentropy, throttle, params \nusing Lathe.stats: mean \nusing Base.Iterators: partition \nusing Random\n#model\nmodel() = Chain(\n  Conv((5, 5), 1 =&gt; 64, elu, pad=(2, 2), stride=(1, 1)),\n  BatchNorm(64),\n  MaxPool((3, 3), pad=(2, 2), stride=(2, 2)),\n  Dropout(0.25),\n  Conv((5, 5), 64 =&gt; 128, elu, pad=(2, 2), stride=(1, 1)),\n  BatchNorm(128),\n  MaxPool((2, 2), stride=(2, 2)),\n  Dropout(0.25),\n  Conv((5, 5), 128 =&gt; 256, elu, pad=(2, 2), stride=(1, 1)),\n  BatchNorm(256),\n  MaxPool((2, 2), stride=(2, 2)),\n  Dropout(0.25),\n  x -&gt; reshape(x, :, size(x, 4)),\n  Dense(2304, 256, elu),\n  Dropout(0.5),\n  Dense(256, 10),\n  softmax) |&gt; gpu\nN = size(train_x)[end]\nixs = collect(1:N)\nshuffle!(ixs)\nn = Int(floor(.9 * N))\nfunction make_batches(data; bs=100)\n    n = size(data[1])[end]\n    sz = (28, 28, 1, bs)\n    iter = [(reshape(Float32.(data[1][:, :, i]), sz), onehotbatch(data[2][i], 0:9)) for i in partition(1:n, bs)] |&gt; gpu\nend\n\ntrain = make_batches(train)\nval = make_batches(val)\ntest = make_batches(test);\nm = model()\n\nfunction met(data)\n    global batch_idx\n    acc = 0\n    for batch in data\n        x, y = batch\n        pred = m(x) .&gt; 0.5\n        tp = Float32(sum((pred .+ y) .== Int16(2)))\n        fp = Float32(sum((pred .- y) .== Int16(1)))\n        fn = Float32(sum((pred .- y) .== Int16(-1)))\n        tn = Float32(sum((pred .+ y) .== Int16(0)))\n        acc += (tp + tn) / (tp + tn + fp + fn)\n    end\n    acc /= length(data)\n    push!(eval_acc, acc)\n    if batch_idx % 100 == 0\n        @show(batch_idx)\n    end\n\n    batch_idx += 1\nend\n\nloss(x, y) = crossentropy(m(x), y)\nevalcb = () -&gt; met(val)\n\nFlux.train!(loss, params(m), train, opt, cb = evalcb)\n\nmet(test)\nprintln(\"accuracy:\", eval_acc[1])\n</code></pre>\n\n<p>In the code above I have error: ERROR: LoadError: UndefVarError: train not defined.\nI have Julia 1.4. \nPlease help me.\nIt is problem in line: train = make_batches(train) or \nFlux.train!(loss, params(m), train, opt, cb = evalcb).\nI think it is problem with versions of Julia. Please help me find the way to solve it.</p>\n"},{"tags":["julia"],"owner":{"reputation":11,"user_id":13722595,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/f7bc9d728b01cc2f729628278ec5ef17?s=128&d=identicon&r=PG&f=1","display_name":"A.Abouelkomsan","link":"https://stackoverflow.com/users/13722595/a-abouelkomsan"},"is_answered":true,"view_count":32,"answer_count":1,"score":1,"last_activity_date":1591881278,"creation_date":1591871651,"last_edit_date":1591872075,"question_id":62322396,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62322396/parallel-for-loop-over-entries-of-an-array-without-sharing-it-with-all-the-worke","title":"Parallel for loop over entries of an array without sharing it with all the workers","body":"<p>I am working with big data arrays, something of order of 10^10 elements. I fill the entries of these arrays by calling a certain function. All entries are independent so I would like to make use of this and fill the array simultaneously by a parallel for loop that runs over a set of indices and calls the function. I know about SharedArrays and this how I usually implement such thing but because I am using huge arrays, I don't want to share them over all the workers. I want to keep my array only on the main worker and then execute a parallel for loops and transferring the result of each loop to the main worker to be stored in the array. </p>\n\n<p>For example, this is what I normally do for small arrays.</p>\n\n<pre><code>H = SharedArray{ComplexF64}(n,n) #creates a shared array of size n*n\n@sync @distributed for i in 1:q \n    H[i] = f(i) #f is a function defined on every worker\nend\n</code></pre>\n\n<p>The problem with such construction is that if the size of the array n is too big, sharing it with all the workers is not very efficient. Is there a way of getting around this? I realize my question might be very naive and I apologize for this.</p>\n"},{"tags":["python","numpy","julia","where-clause","array-broadcasting"],"owner":{"reputation":43,"user_id":11093128,"user_type":"registered","profile_image":"https://i.stack.imgur.com/a8Kkm.jpg?s=128&g=1","display_name":"elscan","link":"https://stackoverflow.com/users/11093128/elscan"},"is_answered":true,"view_count":80,"accepted_answer_id":62314040,"answer_count":2,"score":2,"last_activity_date":1591964790,"creation_date":1591825697,"question_id":62313672,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62313672/numpy-where-functionality-for-julia-code","title":"Numpy where functionality for Julia code?","body":"<p>I read the answer to <a href=\"https://stackoverflow.com/questions/56137218/what-is-julia-equivalent-of-numpys-where-function\">\"What is Julia equivalent of numpy's where function?\"</a>, but do not yet see how the answer (ifelse) gives the user all the functionality of numpy.where. I have posted example code below:</p>\n\n<pre>\n    A = [0.0 0.9 0.0 0.99 0.0]\n\n    a = 1:length(A)\n\n    #-v- produces [0 1.0 0 1.0 0] as expected, but how to get the index values?\n    b = ifelse.(A .- 1.0 .> -1.0, 1.0, 0 )\n    #-^- how to get the array [0.9 0.99]? How to remove all zeros from an array?\n</pre>\n\n<p>Any workarounds other than using for loops would be appreciated.</p>\n"},{"tags":["arrays","deep-learning","julia","conv-neural-network"],"owner":{"reputation":11,"user_id":13723529,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/e7a4da493f0d6c97545610ed61be596d?s=128&d=identicon&r=PG&f=1","display_name":"Asia","link":"https://stackoverflow.com/users/13723529/asia"},"is_answered":false,"view_count":31,"answer_count":0,"score":1,"last_activity_date":1591859531,"creation_date":1591821340,"last_edit_date":1591859531,"question_id":62312664,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62312664/working-with-csv-imge-data-to-perform-cnn-in-julia-format-problem","title":"Working with CSV imge data to perform CNN in Julia - format problem","body":"<p>I am trying to make a convolusional neural network on MNIST sign language dataset. It is provided in a CSV format where each row is one picture and there are 784 columns refering to a single pixel (the pictures have a size 28x28).\nMy problem is that in order to perform the algorithm I need to transpose my data to a different format, the same as is the format of a built-in ML dataset fashion MNIST, which is:</p>\n\n<pre><code>Array{Array{ColorTypes.Gray{FixedPointNumbers.Normed{UInt8,8}},2},1}\n</code></pre>\n\n<p>I would like to end up with the following format, where my data is joined with the encoded labels:</p>\n\n<pre><code>Array{Tuple{Array{Float32,4},Flux.OneHotMatrix{Array{Flux.OneHotVector,1}}},1}\n</code></pre>\n\n<p>I was trying to use reshape function to convert it to a 4-dimensional array, but all I get is:</p>\n\n<pre><code>7172×28×28×1 Array{Float64,4}\n</code></pre>\n\n<p>My labels are in the following (correct) format:</p>\n\n<pre><code>25×7172 Flux.OneHotMatrix{Array{Flux.OneHotVector,1}}\n</code></pre>\n\n<p>I understand that somehow the proper data format is an array in an array while my data is a simple array with 4 dimensions, but I can't figure out how to change that.\nI am new to Julia and some of the code I am using has been written by someone else.</p>\n"},{"tags":["bash","julia"],"owner":{"reputation":169,"user_id":11422610,"user_type":"registered","profile_image":"https://www.gravatar.com/avatar/8094ee2d2a5f9d43e1226fccb7f978b4?s=128&d=identicon&r=PG&f=1","display_name":"Jerzy Brz&#243;ska","link":"https://stackoverflow.com/users/11422610/jerzy-brz%c3%b3ska"},"is_answered":true,"view_count":63,"answer_count":1,"score":5,"last_activity_date":1591836426,"creation_date":1591821122,"question_id":62312599,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62312599/how-should-i-escape-and-other-special-characters-when-running-a-bash-comman","title":"How should I escape &#39;&amp;&amp;&#39; and other special characters when running a bash command with run()?","body":"<p>My code:</p>\n\n<pre><code>df = read(`df -h|grep /dev/sda1 &amp;&amp; df -h|grep pCloud`, String)\n</code></pre>\n\n<p>When I run it I get the following message from Julia:</p>\n\n<blockquote>\n  <p>Warning: special characters \"#{}()[]&lt;>|&amp;*?~;\" should now be quoted in\n  commands │   caller = #shell_parse#333(::String, ::Function, ::String,\n  ::Bool) at shell.jl:100 └ @ Base ./shell.jl:100 df: invalid option --\n  '|' Try 'df --help' for more information. ERROR: LoadError: failed\n  process: Process(<code>df '-h|grep' /dev/sda1 '&amp;&amp;' df '-h|grep' pCloud</code>,\n  ProcessExited(1)) <a href=\"https://discourse.julialang.org/t/how-to-quote-special-characters-in-run-function/21359\" rel=\"noreferrer\">1</a></p>\n</blockquote>\n\n<p>I have found someone having a similar <a href=\"https://discourse.julialang.org/t/how-to-quote-special-characters-in-run-function/21359\" rel=\"noreferrer\">problem</a> but they seem to have resolved this issue without escaping.</p>\n"},{"tags":["python","python-3.x","python-2.7","julia","julia-studio"],"owner":{"reputation":11,"user_id":13723127,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-BYvd2GW4NWE/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmCm-TZm6ONe67JoyIyuuIHVoR7Xg/photo.jpg?sz=128","display_name":"Anushree Joshi","link":"https://stackoverflow.com/users/13723127/anushree-joshi"},"is_answered":false,"view_count":37,"answer_count":1,"score":1,"last_activity_date":1591887616,"creation_date":1591816845,"last_edit_date":1591827229,"question_id":62311506,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62311506/i-want-to-run-small-julia-code-modules-in-python-how-should-i-do-that","title":"I want to run small Julia code/modules in python. How should I do that?","body":"<p>I have created a jl file having the following content:</p>\n\n<pre><code>for i in 1:10\n    println(i)\nend\n1+2\n</code></pre>\n\n<p>When I am calling that jl file in python using the following code:</p>\n\n<pre><code>import julia \nfrom julia.api import Julia\n\nj = julia.Julia(compiled_modules=False)    \nx = j.include(\"experiment.jl\")\n</code></pre>\n\n<p>only x is being printed as 3. No integers(i) from 1-10 are not being printed.\nI am getting following warning:</p>\n\n<blockquote>\n  <p><code>/opt/conda/lib/python3.7/site-packages/julia/core.py:689: FutureWarning: Accessing `Julia().&lt;name&gt;` to obtain Julia objects is deprecated.  Use `from julia import Main; Main.&lt;name&gt;` or `jl = Julia(); jl.eval('&lt;name&gt;')`.</code></p>\n</blockquote>\n"},{"tags":["julia","distance","array-broadcasting","distance-matrix"],"owner":{"reputation":245,"user_id":13259528,"user_type":"registered","profile_image":"https://lh6.googleusercontent.com/-Y56MXFFmOZM/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJM33WNg8Me46hkWkS_cMkj-OkRIBg/photo.jpg?sz=128","display_name":"Conor","link":"https://stackoverflow.com/users/13259528/conor"},"is_answered":true,"view_count":34,"accepted_answer_id":62306794,"answer_count":1,"score":2,"last_activity_date":1591801369,"creation_date":1591794012,"last_edit_date":1591795577,"question_id":62304223,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62304223/julia-broadcasting-pairwise-distance-calculation-across-tensor-of-observations","title":"Julia: Broadcasting pairwise distance calculation across tensor of observations","body":"<p>I am trying to use the <code>Distances</code> package in Julia to perform a broadcasted computation of distance matrices. </p>\n\n<p>I understand how to calculate a single <code>N x N</code> distance matrix for some matrix <code>X</code> (with dimensions <code>D x N</code>), where each column <code>X[:,i]</code> stores a <code>D</code>-dimensional feature vector for observation <code>i</code>. The code would be:</p>\n\n<pre><code>using Distances\n\ndist_matrix = pairwise(Euclidean(), X, dims = 2)\n</code></pre>\n\n<p><code>dist_matrix</code> contains the Euclidean distances between each pair of <code>D</code>-dimensional columns, e.g. <code>dist_matrix[m,n]</code> stores the Euclidean distance between <code>X[:,m]</code> and <code>X[:,n]</code>.</p>\n\n<p>Now imagine my array <code>X</code> is actually an entire <em>tensor</em> or 'volume' of <code>D</code>-dimensional observations, so that <code>X[:,i,j]</code> stores the <code>j</code>-th 'slice' of my <code>D x N</code> observations. The whole array <code>X</code> thus has dimensions <code>D x N x T</code>, where <code>T</code> is the number of slices.</p>\n\n<p>Accordingly, I want to compute a <em>tensor</em> or 'volume' of distance matrices, so that <code>dist_matrix</code> will have dimensions <code>N x N x T</code>. </p>\n\n<p>Is there a way to do this in a single line by broadcasting the <code>pairwise()</code> function in Julia? What's the fastest way to do this? Below shows the idea with a basic for loop:</p>\n\n<pre><code>using Distances\n\ndist_matrix_tensor = zeros(N,N,T);\n\nfor t = 1:T\n        dist_matrix_tensor[:,:,t] = pairwise(Euclidean(), X[:,:,t], dims = 2)\nend\n</code></pre>\n\n<p>EDIT: \nI figured out how to do this using <code>mapslices</code>, but still not sure if it's the best way.</p>\n\n<pre><code>using Distances\n\ndist_function(x)  = pairwise(Euclidean(), x, dims = 2) # define a function that gets the N x N distance matrix for a single 'slice'\n\ndist_matrix_tensor = mapslices(dist_function, X, dims = [1,2]) # map your matrix-operating function across the slices of the main tensor X\n\n</code></pre>\n\n<p>This can of course also be parallelized since each 'slice' of X is independent in this computation, so I'm basically just looking for the fastest way to do this. I'm also in general interested in how you would do this with broadcasting specifically.</p>\n"},{"tags":["performance","memory","julia"],"owner":{"reputation":288,"user_id":7077761,"user_type":"registered","accept_rate":29,"profile_image":"https://www.gravatar.com/avatar/73cb4730cf40c0297fe57a2fd07f7e2f?s=128&d=identicon&r=PG&f=1","display_name":"Joshua Benabou","link":"https://stackoverflow.com/users/7077761/joshua-benabou"},"is_answered":true,"view_count":53,"answer_count":1,"score":1,"last_activity_date":1591774737,"creation_date":1591741257,"last_edit_date":1591774737,"question_id":62292816,"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62292816/do-all-programming-languages-store-the-output-of-function-calls","title":"Do all programming languages store the output of function calls?","body":"<p>This is a general question about if programming languages remember/store the output of function calls. </p>\n\n<p>Suppose I need to calculate a quantity <code>X</code> which depends on some number of simpler calculations. Let's say</p>\n\n<pre><code>X=sin(t)+cos(t)+(cos(t)-sin(t))^2.\n</code></pre>\n\n<p>Naively, I could compute <code>X</code> as above, calling <code>sin(t)</code> twice, and <code>cos(t)</code> twice.</p>\n\n<p>Or I could call <code>sin(t)</code> and <code>cos(t)</code> once:</p>\n\n<pre><code>a=sin(t)\nb=cos(t)\n</code></pre>\n\n<p>and do</p>\n\n<pre><code>X=a+b+(b-a)^2\n</code></pre>\n\n<p>Intuitively, the second method should be twice as fast right? Is this the case in all programming languages?</p>\n\n<p>I ask because, doing such a calculation in Julia, I noticed that computing the simpler quantities once vs calling them at each point they appear in the expression for <code>X</code> does not change the runtime.</p>\n"}],"has_more":false,"quota_max":300,"quota_remaining":233}